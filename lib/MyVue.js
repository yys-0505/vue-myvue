(()=>{"use strict";function t(t,e,i){Object.defineProperty(t,i,{configurable:!0,get:function(){return t[e][i]},set:function(n){t[e][i]=n}})}class e{constructor(){this.sub=[]}addDepend(){e.target.addDep(this)}addSub(t){this.sub.push(t)}notify(){for(let t of this.sub)t.update()}}e.target=null;const i=[];function n(t){this.walk(t)}n.prototype={walk:function(t){Object.keys(t).forEach((e=>{"object"==typeof t[e]&&this.walk(t[e]),this.defineReactive(t,e,t[e])}))},defineReactive:function(t,i,n){const o=new e;Object.defineProperty(t,i,{get:()=>(e.target&&o.addDepend(),n),set(t){t!==n&&(n=t,o.notify())}})}};const o=["created","mounted"];function s(t,e){this.vm=e,this.el=document.querySelector(t),this.init()}function c(t,e,i){this.vm=t,this.cb=i,this.exp=e,this.value=this.get()}function r(t,e){const i=t.$options[e];i&&i.call(t)}s.prototype={init:function(){this.el?this.compileElement(this.el,this.vm):console.error("Dom元素不存在")},compileElement:function(t,e){Array.from(t.childNodes).forEach((t=>{let i=t.textContent;this.isElementNode(t)?this.compileNode(t):this.isTextNode(t)&&/\{\{(.*?)\}\}/g.test(i)&&this.compileText(t),t.childNodes&&t.childNodes.length&&this.compileElement(t,e)}))},compileNode:function(t){const e=t.attributes;Array.from(e).forEach((e=>{const i=e.name,n=e.value;if(this.isDirective(i)){var o=i.substring(2);this.isEventDirective(o)?this.compileEvent(t,this.vm,n,o):this.compileModel(t,this.vm,n),t.removeAttribute(i)}}))},compileText:function(t){let e=RegExp.$1.split("."),i=this.vm;e.forEach((t=>{i=i[t]})),this.updateText(t,i),this.vm.$watch(RegExp.$1,(e=>{this.updateText(t,e)}))},compileEvent:function(t,e,i,n){var o=n.split(":")[1],s=e.methods&&e.methods[i];o&&s&&t.addEventListener(o,s.bind(e),!1)},compileModel:function(t,e,i){let n=e[i];this.modelUpdater(t,n),e.$watch(i,(e=>{this.modelUpdater(t,e)})),t.addEventListener("input",(t=>{let o=t.target.value,s=i.split("."),c=e;n!==o&&s.forEach(((t,e)=>{if(e===s.length-1)return c[t]=o,void(n=o);c=c[t]}))}))},updateText:function(t,e){t.textContent=void 0===e?"":e},modelUpdater:function(t,e){t.value=void 0===e?"":e},isDirective:function(t){return 0===t.indexOf("v-")},isEventDirective:function(t){return 0===t.indexOf("on:")},isElementNode:function(t){return 1===t.nodeType},isTextNode:function(t){return 3===t.nodeType}},c.prototype={get:function(){e.target&&i.push(e.target),e.target=this;let t=this.vm;return this.exp.split(".").forEach((e=>{t=t[e]})),i.pop(),e.target=i[i.length-1],t},addDep:function(t){t.addSub(this)},update:function(){let t=this.vm;this.exp.split(".").forEach((e=>{t=t[e]})),this.cb.call(this.vm,t,this.value)}},window.MyVue=function(e){let i=this;i.$options=e,i.$watch=function(t,e){new c(i,t,e)},function(t){t._data=t.$options.data,t.methods=t.$options.methods,new n(t._data),o.forEach((e=>{t.$options[e]=t.$options[e]||function(){}}))}(i);for(let e in i._data)t(i,"_data",e);r(i,"created"),new s(i.$options.el,i),r(i,"mounted")}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWUtbXl2dWUvLi9zcmMvY29yZS9pbnN0YW5jZS9wcm94eS5qcyIsIndlYnBhY2s6Ly92dWUtbXl2dWUvLi9zcmMvY29yZS9vYnNlcnZlci9kZXAuanMiLCJ3ZWJwYWNrOi8vdnVlLW15dnVlLy4vc3JjL2NvcmUvb2JzZXJ2ZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdnVlLW15dnVlLy4vc3JjL2NvcmUvaW5zdGFuY2UvaW5pdC5qcyIsIndlYnBhY2s6Ly92dWUtbXl2dWUvLi9zcmMvY29yZS9jb21waWxlL2luZGV4LmpzIiwid2VicGFjazovL3Z1ZS1teXZ1ZS8uL3NyYy9jb3JlL29ic2VydmVyL3dhdGNoZXIuanMiLCJ3ZWJwYWNrOi8vdnVlLW15dnVlLy4vc3JjL2NvcmUvaW5zdGFuY2UvbGlmZWN5Y2xlLmpzIiwid2VicGFjazovL3Z1ZS1teXZ1ZS8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly92dWUtbXl2dWUvLi9zcmMvY29yZS9pbmRleC5qcyJdLCJuYW1lcyI6WyJwcm94eSIsInRhcmdldCIsInNvdXJjZUtleSIsImtleSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZ2V0Iiwic2V0IiwibmV3VmFsIiwiRGVwIiwidGhpcyIsInN1YiIsImFkZERlcCIsInB1c2giLCJ1cGRhdGUiLCJ0YXJnZXRTdGFjayIsIk9ic2VydmVyIiwiZGF0YSIsIndhbGsiLCJwcm90b3R5cGUiLCJvYmoiLCJrZXlzIiwiZm9yRWFjaCIsImRlZmluZVJlYWN0aXZlIiwidmFsdWUiLCJkZXAiLCJhZGREZXBlbmQiLCJub3RpZnkiLCJMSUZFQ1lDTEVfSE9PS1MiLCJDb21waWxlciIsImVsIiwidm0iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpbml0IiwiV2F0Y2hlciIsImV4cCIsImNiIiwiY2FsbEhvb2siLCJob29rIiwiaGFuZGxlcnMiLCIkb3B0aW9ucyIsImNhbGwiLCJjb21waWxlRWxlbWVudCIsImNvbnNvbGUiLCJlcnJvciIsImZyYWciLCJBcnJheSIsImZyb20iLCJjaGlsZE5vZGVzIiwibm9kZSIsInRleHQiLCJ0ZXh0Q29udGVudCIsImlzRWxlbWVudE5vZGUiLCJjb21waWxlTm9kZSIsImlzVGV4dE5vZGUiLCJ0ZXN0IiwiY29tcGlsZVRleHQiLCJsZW5ndGgiLCJub2RlQXR0ciIsImF0dHJpYnV0ZXMiLCJhdHRyIiwibmFtZSIsImlzRGlyZWN0aXZlIiwiZGlyIiwic3Vic3RyaW5nIiwiaXNFdmVudERpcmVjdGl2ZSIsImNvbXBpbGVFdmVudCIsImNvbXBpbGVNb2RlbCIsInJlbW92ZUF0dHJpYnV0ZSIsImFyciIsIlJlZ0V4cCIsIiQxIiwic3BsaXQiLCJ2YWwiLCJ1cGRhdGVUZXh0IiwiJHdhdGNoIiwiZXZlbnRUeXBlIiwibWV0aG9kcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJiaW5kIiwibm93VmFsIiwibW9kZWxVcGRhdGVyIiwiZSIsImkiLCJpbmRleE9mIiwibm9kZVR5cGUiLCJwb3AiLCJhZGRTdWIiLCJ3aW5kb3ciLCJNeVZ1ZSIsIm9wdGlvbnMiLCJfZGF0YSIsImluaXRPcHRpb25zIl0sIm1hcHBpbmdzIjoibUJBQWUsU0FBU0EsRUFBT0MsRUFBUUMsRUFBV0MsR0FDaERDLE9BQU9DLGVBQWVKLEVBQVFFLEVBQUssQ0FDakNHLGNBQWMsRUFDZEMsSUFBSyxXQUNILE9BQU9OLEVBQU9DLEdBQVdDLElBRTNCSyxJQUFLLFNBQXNCQyxHQUN6QlIsRUFBT0MsR0FBV0MsR0FBT00sS0NQaEIsTUFBTUMsRUFDbkIsY0FDRUMsS0FBS0MsSUFBTSxHQUViLFlBQ0VGLEVBQUlULE9BQU9ZLE9BQU9GLE1BRXBCLE9BQVFDLEdBQ05ELEtBQUtDLElBQUlFLEtBQUtGLEdBRWhCLFNBQ0UsSUFBSyxJQUFJQSxLQUFPRCxLQUFLQyxJQUNuQkEsRUFBSUcsVUFLVkwsRUFBSVQsT0FBUyxLQUNiLE1BQU1lLEVBQWMsR0NoQnBCLFNBQVNDLEVBQVNDLEdBQ2hCUCxLQUFLUSxLQUFLRCxHQUdaRCxFQUFTRyxVQUFZLENBQ25CRCxLQUFNLFNBQVVFLEdBQ2RqQixPQUFPa0IsS0FBS0QsR0FBS0UsU0FBU3BCLElBQ0EsaUJBQWJrQixFQUFJbEIsSUFDYlEsS0FBS1EsS0FBS0UsRUFBSWxCLElBRWhCUSxLQUFLYSxlQUFlSCxFQUFLbEIsRUFBS2tCLEVBQUlsQixRQUd0Q3FCLGVBQWdCLFNBQVNILEVBQUtsQixFQUFLc0IsR0FDakMsTUFBTUMsRUFBTSxJQUFJaEIsRUFDaEJOLE9BQU9DLGVBQWVnQixFQUFLbEIsRUFBSyxDQUM5QkksSUFBSSxLQUNFRyxFQUFJVCxRQUNOeUIsRUFBSUMsWUFFQ0YsR0FFVCxJQUFLaEIsR0FDQ0EsSUFBV2dCLElBR2ZBLEVBQVFoQixFQUNSaUIsRUFBSUUsZUM1QlosTUFBTUMsRUFBa0IsQ0FDdEIsVUFDQSxXQ0hhLFNBQVNDLEVBQVNDLEVBQUlDLEdBQ25DckIsS0FBS3FCLEdBQUtBLEVBQ1ZyQixLQUFLb0IsR0FBS0UsU0FBU0MsY0FBY0gsR0FDakNwQixLQUFLd0IsT0NEUSxTQUFTQyxFQUFTSixFQUFJSyxFQUFLQyxHQUN4QzNCLEtBQUtxQixHQUFLQSxFQUNWckIsS0FBSzJCLEdBQUtBLEVBQ1YzQixLQUFLMEIsSUFBTUEsRUFDWDFCLEtBQUtjLE1BQVFkLEtBQUtKLE1DTmIsU0FBU2dDLEVBQVVQLEVBQUlRLEdBQzVCLE1BQU1DLEVBQVdULEVBQUdVLFNBQVNGLEdBQ3pCQyxHQUNGQSxFQUFTRSxLQUFLWCxHRkdsQkYsRUFBU1YsVUFBWSxDQUNuQmUsS0FBTSxXQUNBeEIsS0FBS29CLEdBQ1BwQixLQUFLaUMsZUFBZWpDLEtBQUtvQixHQUFJcEIsS0FBS3FCLElBRWxDYSxRQUFRQyxNQUFNLGFBR2xCRixlQUFnQixTQUFVRyxFQUFNZixHQUM5QmdCLE1BQU1DLEtBQUtGLEVBQUtHLFlBQVkzQixTQUFRNEIsSUFDbEMsSUFBSUMsRUFBT0QsRUFBS0UsWUFFWjFDLEtBQUsyQyxjQUFjSCxHQUNyQnhDLEtBQUs0QyxZQUFZSixHQUNSeEMsS0FBSzZDLFdBQVdMLElBSGpCLGlCQUc4Qk0sS0FBS0wsSUFDM0N6QyxLQUFLK0MsWUFBWVAsR0FJZkEsRUFBS0QsWUFBY0MsRUFBS0QsV0FBV1MsUUFDckNoRCxLQUFLaUMsZUFBZU8sRUFBTW5CLE9BSWhDdUIsWUFBYSxTQUFTSixHQUNwQixNQUFNUyxFQUFXVCxFQUFLVSxXQUN0QmIsTUFBTUMsS0FBS1csR0FBVXJDLFNBQVF1QyxJQUMzQixNQUFNQyxFQUFPRCxFQUFLQyxLQUNaMUIsRUFBTXlCLEVBQUtyQyxNQUVqQixHQUFJZCxLQUFLcUQsWUFBWUQsR0FBTyxDQUMxQixJQUFJRSxFQUFNRixFQUFLRyxVQUFVLEdBQ3JCdkQsS0FBS3dELGlCQUFpQkYsR0FDeEJ0RCxLQUFLeUQsYUFBYWpCLEVBQU14QyxLQUFLcUIsR0FBSUssRUFBSzRCLEdBRXRDdEQsS0FBSzBELGFBQWFsQixFQUFNeEMsS0FBS3FCLEdBQUlLLEdBRW5DYyxFQUFLbUIsZ0JBQWdCUCxRQUkzQkwsWUFBYSxTQUFTUCxHQUNwQixJQUFJb0IsRUFBTUMsT0FBT0MsR0FBR0MsTUFBTSxLQUN0QkMsRUFBTWhFLEtBQUtxQixHQUNmdUMsRUFBSWhELFNBQVFwQixJQUNWd0UsRUFBTUEsRUFBSXhFLE1BRVpRLEtBQUtpRSxXQUFXekIsRUFBTXdCLEdBQ3RCaEUsS0FBS3FCLEdBQUc2QyxPQUFPTCxPQUFPQyxJQUFLaEUsSUFDekJFLEtBQUtpRSxXQUFXekIsRUFBTTFDLE9BRzFCMkQsYUFBYyxTQUFVakIsRUFBTW5CLEVBQUlLLEVBQUs0QixHQUNyQyxJQUFJYSxFQUFZYixFQUFJUyxNQUFNLEtBQUssR0FDM0JwQyxFQUFLTixFQUFHK0MsU0FBVy9DLEVBQUcrQyxRQUFRMUMsR0FDOUJ5QyxHQUFheEMsR0FDZmEsRUFBSzZCLGlCQUFpQkYsRUFBV3hDLEVBQUcyQyxLQUFLakQsSUFBSyxJQUdsRHFDLGFBQWMsU0FBVWxCLEVBQU1uQixFQUFJSyxHQUNoQyxJQUFJNkMsRUFBU2xELEVBQUdLLEdBQ2hCMUIsS0FBS3dFLGFBQWFoQyxFQUFNK0IsR0FFeEJsRCxFQUFHNkMsT0FBT3hDLEdBQU01QixJQUNkRSxLQUFLd0UsYUFBYWhDLEVBQU0xQyxNQUcxQjBDLEVBQUs2QixpQkFBaUIsU0FBU0ksSUFDN0IsSUFBSTNFLEVBQVMyRSxFQUFFbkYsT0FBT3dCLE1BQ2xCOEMsRUFBTWxDLEVBQUlxQyxNQUFNLEtBQ2hCQyxFQUFNM0MsRUFDTmtELElBQVd6RSxHQUdmOEQsRUFBSWhELFNBQVEsQ0FBQ3BCLEVBQUtrRixLQUNoQixHQUFJQSxJQUFNZCxFQUFJWixPQUFTLEVBR3JCLE9BRkFnQixFQUFJeEUsR0FBT00sT0FDWHlFLEVBQVN6RSxHQUdYa0UsRUFBTUEsRUFBSXhFLFVBSWhCeUUsV0FBWSxTQUFVekIsRUFBTTFCLEdBQzFCMEIsRUFBS0UsaUJBQThCLElBQVQ1QixFQUF1QixHQUFLQSxHQUV4RDBELGFBQWMsU0FBU2hDLEVBQU0xQixHQUMzQjBCLEVBQUsxQixXQUF3QixJQUFUQSxFQUF1QixHQUFLQSxHQUVsRHVDLFlBQWEsU0FBU0YsR0FDcEIsT0FBOEIsSUFBdkJBLEVBQUt3QixRQUFRLE9BRXRCbkIsaUJBQWtCLFNBQVNGLEdBQ3pCLE9BQThCLElBQXZCQSxFQUFJcUIsUUFBUSxRQUVyQmhDLGNBQWUsU0FBVUgsR0FDdkIsT0FBeUIsSUFBbEJBLEVBQUtvQyxVQUVkL0IsV0FBWSxTQUFTTCxHQUNuQixPQUF5QixJQUFsQkEsRUFBS29DLFdDakdoQm5ELEVBQVFoQixVQUFZLENBQ2xCYixJQUFLLFdKV0RHLEVBQUlULFFBQVFlLEVBQVlGLEtBQUtKLEVBQUlULFFBQ3JDUyxFQUFJVCxPSVhTVSxLQUNYLElBQUlnRSxFQUFNaEUsS0FBS3FCLEdBS2YsT0FKQXJCLEtBQUswQixJQUFJcUMsTUFBTSxLQUFLbkQsU0FBU3BCLElBQzNCd0UsRUFBTUEsRUFBSXhFLE1KWWRhLEVBQVl3RSxNQUNaOUUsRUFBSVQsT0FBU2UsRUFBWUEsRUFBWTJDLE9BQVMsR0lWckNnQixHQUVUOUQsT0FBUSxTQUFTYSxHQUNmQSxFQUFJK0QsT0FBTzlFLE9BRWJJLE9BQVEsV0FDTixJQUFJNEQsRUFBTWhFLEtBQUtxQixHQUNmckIsS0FBSzBCLElBQUlxQyxNQUFNLEtBQUtuRCxTQUFTcEIsSUFDM0J3RSxFQUFNQSxFQUFJeEUsTUFFWlEsS0FBSzJCLEdBQUdLLEtBQUtoQyxLQUFLcUIsR0FBSTJDLEVBQUtoRSxLQUFLYyxTRXpCcENpRSxPQUFPQyxNQ0lRLFNBQWVDLEdBQzVCLElBQUk1RCxFQUFLckIsS0FDVHFCLEVBQUdVLFNBQVdrRCxFQUNkNUQsRUFBRzZDLE9BQVMsU0FBVTFFLEVBQUttQyxHQUN6QixJQUFJRixFQUFRSixFQUFJN0IsRUFBS21DLElMTFYsU0FBc0JOLEdBQ25DQSxFQUFHNkQsTUFBUTdELEVBQUdVLFNBQVN4QixLQUN2QmMsRUFBRytDLFFBQVUvQyxFQUFHVSxTQUFTcUMsUUQ2QmxCLElBQUk5RCxFQzVCRmUsRUFBRzZELE9BQ1poRSxFQUFnQk4sU0FBUWlCLElBQ3RCUixFQUFHVSxTQUFTRixHQUFRUixFQUFHVSxTQUFTRixJQUFTLGdCS0UzQ3NELENBQVk5RCxHQUNaLElBQUssSUFBSTdCLEtBQU82QixFQUFHNkQsTUFDakI3RixFQUFNZ0MsRUFBSSxRQUFTN0IsR0FFckJvQyxFQUFTUCxFQUFJLFdBQ2IsSUFBSUYsRUFBU0UsRUFBR1UsU0FBU1gsR0FBSUMsR0FDN0JPLEVBQVNQLEVBQUksYSIsImZpbGUiOiJNeVZ1ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHByb3h5ICh0YXJnZXQsIHNvdXJjZUtleSwga2V5KSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwge1xuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uIHByb3h5R2V0dGVyICgpIHtcbiAgICAgIHJldHVybiB0YXJnZXRbc291cmNlS2V5XVtrZXldXG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHByb3h5U2V0dGVyIChuZXdWYWwpIHtcbiAgICAgIHRhcmdldFtzb3VyY2VLZXldW2tleV0gPSBuZXdWYWxcbiAgICB9XG4gIH0pXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGVwIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMuc3ViID0gW11cbiAgfVxuICBhZGREZXBlbmQgKCkge1xuICAgIERlcC50YXJnZXQuYWRkRGVwKHRoaXMpXG4gIH1cbiAgYWRkU3ViIChzdWIpIHtcbiAgICB0aGlzLnN1Yi5wdXNoKHN1YilcbiAgfVxuICBub3RpZnkgKCkge1xuICAgIGZvciAobGV0IHN1YiBvZiB0aGlzLnN1Yikge1xuICAgICAgc3ViLnVwZGF0ZSgpXG4gICAgfVxuICB9XG59XG5cbkRlcC50YXJnZXQgPSBudWxsXG5jb25zdCB0YXJnZXRTdGFjayA9IFtdXG5cbmV4cG9ydCBmdW5jdGlvbiBwdXNoVGFyZ2V0IChfdGFyZ2V0KSB7XG4gIGlmIChEZXAudGFyZ2V0KSB0YXJnZXRTdGFjay5wdXNoKERlcC50YXJnZXQpXG4gIERlcC50YXJnZXQgPSBfdGFyZ2V0XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwb3BUYXJnZXQgKCkge1xuICB0YXJnZXRTdGFjay5wb3AoKVxuICBEZXAudGFyZ2V0ID0gdGFyZ2V0U3RhY2tbdGFyZ2V0U3RhY2subGVuZ3RoIC0gMV1cbn1cblxuIiwiaW1wb3J0IERlcCBmcm9tICcuL2RlcCdcblxuZnVuY3Rpb24gT2JzZXJ2ZXIoZGF0YSkge1xuICB0aGlzLndhbGsoZGF0YSlcbn1cblxuT2JzZXJ2ZXIucHJvdG90eXBlID0ge1xuICB3YWxrOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgT2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIGlmICh0eXBlb2Ygb2JqW2tleV0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHRoaXMud2FsayhvYmpba2V5XSlcbiAgICAgIH1cbiAgICAgIHRoaXMuZGVmaW5lUmVhY3RpdmUob2JqLCBrZXksIG9ialtrZXldKVxuICAgIH0pXG4gIH0sXG4gIGRlZmluZVJlYWN0aXZlOiBmdW5jdGlvbihvYmosIGtleSwgdmFsdWUpIHtcbiAgICBjb25zdCBkZXAgPSBuZXcgRGVwKClcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgIGdldCAoKSB7XG4gICAgICAgIGlmIChEZXAudGFyZ2V0KSB7XG4gICAgICAgICAgZGVwLmFkZERlcGVuZCgpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlXG4gICAgICB9LFxuICAgICAgc2V0IChuZXdWYWwpIHtcbiAgICAgICAgaWYgKG5ld1ZhbCA9PT0gdmFsdWUpIHtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICB2YWx1ZSA9IG5ld1ZhbFxuICAgICAgICBkZXAubm90aWZ5KClcbiAgICAgIH1cbiAgICB9KVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG9ic2VydmVyKHZhbHVlKSB7XG4gIHJldHVybiBuZXcgT2JzZXJ2ZXIodmFsdWUpXG59IiwiaW1wb3J0IG9ic2VydmVyIGZyb20gXCIuLi9vYnNlcnZlclwiO1xuY29uc3QgTElGRUNZQ0xFX0hPT0tTID0gW1xuICAnY3JlYXRlZCcsXG4gICdtb3VudGVkJ1xuXVxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW5pdE9wdGlvbnMgKHZtKSB7XG4gIHZtLl9kYXRhID0gdm0uJG9wdGlvbnMuZGF0YTtcbiAgdm0ubWV0aG9kcyA9IHZtLiRvcHRpb25zLm1ldGhvZHM7XG4gIG9ic2VydmVyKHZtLl9kYXRhKVxuICBMSUZFQ1lDTEVfSE9PS1MuZm9yRWFjaChob29rID0+IHtcbiAgICB2bS4kb3B0aW9uc1tob29rXSA9IHZtLiRvcHRpb25zW2hvb2tdIHx8IGZ1bmN0aW9uICgpIHt9XG4gIH0pXG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDb21waWxlcihlbCwgdm0pIHtcbiAgdGhpcy52bSA9IHZtO1xuICB0aGlzLmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbCk7XG4gIHRoaXMuaW5pdCgpO1xufVxuXG5Db21waWxlci5wcm90b3R5cGUgPSB7XG4gIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLmVsKSB7XG4gICAgICB0aGlzLmNvbXBpbGVFbGVtZW50KHRoaXMuZWwsIHRoaXMudm0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0RvbeWFg+e0oOS4jeWtmOWcqCcpO1xuICAgIH1cbiAgfSxcbiAgY29tcGlsZUVsZW1lbnQ6IGZ1bmN0aW9uIChmcmFnLCB2bSkge1xuICAgIEFycmF5LmZyb20oZnJhZy5jaGlsZE5vZGVzKS5mb3JFYWNoKG5vZGUgPT4ge1xuICAgICAgbGV0IHRleHQgPSBub2RlLnRleHRDb250ZW50O1xuICAgICAgbGV0IHJlZyA9IC9cXHtcXHsoLio/KVxcfVxcfS9nOyAgIC8vIOato+WImeWMuemFjXt7fX1cbiAgICAgIGlmICh0aGlzLmlzRWxlbWVudE5vZGUobm9kZSkpIHsgIFxuICAgICAgICB0aGlzLmNvbXBpbGVOb2RlKG5vZGUpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmlzVGV4dE5vZGUobm9kZSkgJiYgcmVnLnRlc3QodGV4dCkpIHsgLy8g5Y2z5piv5paH5pys6IqC54K55Y+I5pyJ5aSn5ous5Y+355qE5oOF5Ya1e3t9fVxuICAgICAgICB0aGlzLmNvbXBpbGVUZXh0KG5vZGUpO1xuICAgICAgfVxuXG4gICAgICAvLyDlpoLmnpzov5jmnInlrZDoioLngrnvvIznu6fnu63pgJLlvZJjb21waWxlRWxlbWVudFxuICAgICAgaWYgKG5vZGUuY2hpbGROb2RlcyAmJiBub2RlLmNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuY29tcGlsZUVsZW1lbnQobm9kZSwgdm0pO1xuICAgICAgfVxuICAgIH0pXG4gIH0sXG4gIGNvbXBpbGVOb2RlOiBmdW5jdGlvbihub2RlKSB7XG4gICAgY29uc3Qgbm9kZUF0dHIgPSBub2RlLmF0dHJpYnV0ZXM7IC8vIOiOt+WPlmRvbeS4iueahOaJgOacieWxnuaApyzmmK/kuKrnsbvmlbDnu4RcbiAgICBBcnJheS5mcm9tKG5vZGVBdHRyKS5mb3JFYWNoKGF0dHIgPT4ge1xuICAgICAgY29uc3QgbmFtZSA9IGF0dHIubmFtZTtcbiAgICAgIGNvbnN0IGV4cCA9IGF0dHIudmFsdWU7XG5cbiAgICAgIGlmICh0aGlzLmlzRGlyZWN0aXZlKG5hbWUpKSB7IC8vIHYtXG4gICAgICAgIHZhciBkaXIgPSBuYW1lLnN1YnN0cmluZygyKTtcbiAgICAgICAgaWYgKHRoaXMuaXNFdmVudERpcmVjdGl2ZShkaXIpKSB7ICAvLyB2LW9uOmNsaWNrIOS6i+S7tuaMh+S7pFxuICAgICAgICAgIHRoaXMuY29tcGlsZUV2ZW50KG5vZGUsIHRoaXMudm0sIGV4cCwgZGlyKTtcbiAgICAgICAgfSBlbHNlIHsgIC8vIHYtbW9kZWwg5oyH5LukXG4gICAgICAgICAgdGhpcy5jb21waWxlTW9kZWwobm9kZSwgdGhpcy52bSwgZXhwKTtcbiAgICAgICAgfVxuICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTsgLy8gZG9t5Lit5LiN5pi+56S6XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG4gIGNvbXBpbGVUZXh0OiBmdW5jdGlvbihub2RlKSB7XG4gICAgbGV0IGFyciA9IFJlZ0V4cC4kMS5zcGxpdCgnLicpO1xuICAgIGxldCB2YWwgPSB0aGlzLnZtO1xuICAgIGFyci5mb3JFYWNoKGtleSA9PiB7XG4gICAgICB2YWwgPSB2YWxba2V5XTtcbiAgICB9KTtcbiAgICB0aGlzLnVwZGF0ZVRleHQobm9kZSwgdmFsKTtcbiAgICB0aGlzLnZtLiR3YXRjaChSZWdFeHAuJDEsIChuZXdWYWwpID0+IHtcbiAgICAgIHRoaXMudXBkYXRlVGV4dChub2RlLCBuZXdWYWwpO1xuICAgIH0pXG4gIH0sXG4gIGNvbXBpbGVFdmVudDogZnVuY3Rpb24gKG5vZGUsIHZtLCBleHAsIGRpcikge1xuICAgIHZhciBldmVudFR5cGUgPSBkaXIuc3BsaXQoJzonKVsxXTtcbiAgICB2YXIgY2IgPSB2bS5tZXRob2RzICYmIHZtLm1ldGhvZHNbZXhwXTtcbiAgICBpZiAoZXZlbnRUeXBlICYmIGNiKSB7XG4gICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBjYi5iaW5kKHZtKSwgZmFsc2UpO1xuICAgIH1cbiAgfSxcbiAgY29tcGlsZU1vZGVsOiBmdW5jdGlvbiAobm9kZSwgdm0sIGV4cCkge1xuICAgIGxldCBub3dWYWwgPSB2bVtleHBdO1xuICAgIHRoaXMubW9kZWxVcGRhdGVyKG5vZGUsIG5vd1ZhbCk7XG4gICAgLy8g55uR5ZCs5Y+Y5YyWXG4gICAgdm0uJHdhdGNoKGV4cCwgKG5ld1ZhbCkgPT4ge1xuICAgICAgdGhpcy5tb2RlbFVwZGF0ZXIobm9kZSwgbmV3VmFsKTtcbiAgICB9KTtcblxuICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBlID0+IHtcbiAgICAgIGxldCBuZXdWYWwgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgIGxldCBhcnIgPSBleHAuc3BsaXQoJy4nKVxuICAgICAgbGV0IHZhbCA9IHZtO1xuICAgICAgaWYgKG5vd1ZhbCA9PT0gbmV3VmFsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGFyci5mb3JFYWNoKChrZXksIGkpPT4ge1xuICAgICAgICBpZiAoaSA9PT0gYXJyLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICB2YWxba2V5XSA9IG5ld1ZhbDtcbiAgICAgICAgICBub3dWYWwgPSBuZXdWYWw7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgdmFsID0gdmFsW2tleV07XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSxcbiAgdXBkYXRlVGV4dDogZnVuY3Rpb24gKG5vZGUsIHZhbHVlKSB7XG4gICAgbm9kZS50ZXh0Q29udGVudCA9IHR5cGVvZiB2YWx1ZSA9PSAndW5kZWZpbmVkJyA/ICcnIDogdmFsdWU7XG4gIH0sXG4gIG1vZGVsVXBkYXRlcjogZnVuY3Rpb24obm9kZSwgdmFsdWUpIHtcbiAgICBub2RlLnZhbHVlID0gdHlwZW9mIHZhbHVlID09ICd1bmRlZmluZWQnID8gJycgOiB2YWx1ZTtcbiAgfSxcbiAgaXNEaXJlY3RpdmU6IGZ1bmN0aW9uKGF0dHIpIHtcbiAgICByZXR1cm4gYXR0ci5pbmRleE9mKCd2LScpID09PSAwO1xuICB9LFxuICBpc0V2ZW50RGlyZWN0aXZlOiBmdW5jdGlvbihkaXIpIHtcbiAgICByZXR1cm4gZGlyLmluZGV4T2YoJ29uOicpID09PSAwO1xuICB9LFxuICBpc0VsZW1lbnROb2RlOiBmdW5jdGlvbiAobm9kZSkge1xuICAgIHJldHVybiBub2RlLm5vZGVUeXBlID09PSAxO1xuICB9LFxuICBpc1RleHROb2RlOiBmdW5jdGlvbihub2RlKSB7XG4gICAgcmV0dXJuIG5vZGUubm9kZVR5cGUgPT09IDM7XG4gIH1cbn0iLCJpbXBvcnQgeyBwb3BUYXJnZXQsIHB1c2hUYXJnZXQgfSBmcm9tICcuL2RlcCdcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gV2F0Y2hlciAodm0sIGV4cCwgY2Ipe1xuICB0aGlzLnZtID0gdm1cbiAgdGhpcy5jYiA9IGNiXG4gIHRoaXMuZXhwID0gZXhwXG4gIHRoaXMudmFsdWUgPSB0aGlzLmdldCgpOyAvLyDlsIboh6rlt7Hmt7vliqDliLDorqLpmIXlmajnmoTmk43kvZxcbn1cblxuV2F0Y2hlci5wcm90b3R5cGUgPSB7XG4gIGdldDogZnVuY3Rpb24oKSB7XG4gICAgcHVzaFRhcmdldCh0aGlzKTsgLy8g57yT5a2Y6Ieq5bexXG4gICAgbGV0IHZhbCA9IHRoaXMudm1cbiAgICB0aGlzLmV4cC5zcGxpdCgnLicpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgdmFsID0gdmFsW2tleV0gLy8g5by65Yi25omn6KGM55uR5ZCs5Zmo6YeM55qEZ2V05Ye95pWwXG4gICAgfSlcbiAgICBwb3BUYXJnZXQoKTsgIC8vIOmHiuaUvuiHquW3sVxuICAgIHJldHVybiB2YWxcbiAgfSxcbiAgYWRkRGVwOiBmdW5jdGlvbihkZXApIHtcbiAgICBkZXAuYWRkU3ViKHRoaXMpXG4gIH0sXG4gIHVwZGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgbGV0IHZhbCA9IHRoaXMudm1cbiAgICB0aGlzLmV4cC5zcGxpdCgnLicpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgdmFsID0gdmFsW2tleV1cbiAgICB9KVxuICAgIHRoaXMuY2IuY2FsbCh0aGlzLnZtLCB2YWwsIHRoaXMudmFsdWUpXG4gIH1cbn0iLCJleHBvcnQgZnVuY3Rpb24gY2FsbEhvb2sgKHZtLCBob29rKSB7XG4gIGNvbnN0IGhhbmRsZXJzID0gdm0uJG9wdGlvbnNbaG9va11cbiAgaWYgKGhhbmRsZXJzKSB7XG4gICAgaGFuZGxlcnMuY2FsbCh2bSlcbiAgfVxufSIsImltcG9ydCBNeVZ1ZSBmcm9tICcuL2NvcmUnXHJcblxyXG53aW5kb3cuTXlWdWUgPSBNeVZ1ZSIsImltcG9ydCBwcm94eSBmcm9tICcuL2luc3RhbmNlL3Byb3h5J1xuaW1wb3J0IGluaXRPcHRpb25zIGZyb20gJy4vaW5zdGFuY2UvaW5pdCdcbmltcG9ydCBDb21waWxlciBmcm9tIFwiLi9jb21waWxlXCI7XG5pbXBvcnQgV2F0Y2hlciBmcm9tIFwiLi9vYnNlcnZlci93YXRjaGVyXCJcbmltcG9ydCB7IGNhbGxIb29rIH0gZnJvbSBcIi4vaW5zdGFuY2UvbGlmZWN5Y2xlXCJcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTXlWdWUob3B0aW9ucykge1xuICBsZXQgdm0gPSB0aGlzXG4gIHZtLiRvcHRpb25zID0gb3B0aW9uc1xuICB2bS4kd2F0Y2ggPSBmdW5jdGlvbiAoa2V5LCBjYikge1xuICAgIG5ldyBXYXRjaGVyKHZtLCBrZXksIGNiKVxuICB9XG4gIGluaXRPcHRpb25zKHZtKVxuICBmb3IgKGxldCBrZXkgaW4gdm0uX2RhdGEpIHtcbiAgICBwcm94eSh2bSwgJ19kYXRhJywga2V5KVxuICB9XG4gIGNhbGxIb29rKHZtLCAnY3JlYXRlZCcpXG4gIG5ldyBDb21waWxlcih2bS4kb3B0aW9ucy5lbCwgdm0pXG4gIGNhbGxIb29rKHZtLCAnbW91bnRlZCcpOyAvLyDmiYDmnInkuovmg4XlpITnkIblpb3lkI7miafooYxtb3VudGVk5Ye95pWwXG59Il0sInNvdXJjZVJvb3QiOiIifQ==